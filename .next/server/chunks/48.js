"use strict";exports.id=48,exports.ids=[48],exports.modules={14661:(e,t,n)=>{n.d(t,{hd:()=>getPaddedMonth,kC:()=>capitalize,v4:()=>isInViewport});let getPaddedMonth=e=>e<10?`0${e}`:e,capitalize=e=>e.charAt(0).toUpperCase()+e.slice(1),isInViewport=e=>{let t=e.getBoundingClientRect();return t.top>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)}},83191:(e,t,n)=>{n.d(t,{Z:()=>ChessComInput});var a=n(20997),s=n(91645),i=n(14661);let getChessComUserRecentGames=async e=>{let t=new Date,n=t.getUTCFullYear(),a=t.getUTCMonth()+1,s=(0,i.hd)(a),r=await fetch(`https://api.chess.com/pub/player/${e}/games/${n}/${s}`);if(404===r.status)return[];let l=await r.json(),o=l?.games??[];if(o.length<50){let t=1===a?12:a-1,s=(0,i.hd)(t),r=12===t?n-1:n,l=await fetch(`https://api.chess.com/pub/player/${e}/games/${r}/${s}`),c=await l.json();o.push(...c?.games??[])}let c=o.sort((e,t)=>t.end_time-e.end_time).slice(0,50);return c};var r=n(75857),l=n.n(r),o=n(7988),c=n.n(o),d=n(17373),h=n.n(d),m=n(71687),u=n.n(m),g=n(72265),p=n.n(g),x=n(93674),C=n.n(x),j=n(16689);function ChessComInput({pgn:e,setPgn:t}){let[n,r]=(0,j.useState)(0),[o,d]=(0,s._)("chesscom-username",""),[m,g]=(0,j.useState)([]);return(0,j.useEffect)(()=>{if(!o){g([]);return}let e=setTimeout(async()=>{let e=await getChessComUserRecentGames(o);g(e)},0===n?0:500);return r(e=>e+1),()=>{clearTimeout(e)}},[o]),(0,a.jsxs)(a.Fragment,{children:[a.jsx(l(),{sx:{m:1,width:300},children:a.jsx(c(),{label:"Enter your Chess.com username...",variant:"outlined",value:o??"",onChange:e=>d(e.target.value)})}),o&&(0,a.jsxs)(h(),{container:!0,item:!0,xs:12,gap:2,justifyContent:"center",alignContent:"center",minHeight:100,children:[m.map(n=>a.jsx(u(),{onClick:()=>t(n.pgn),selected:e===n.pgn,style:{width:350,maxWidth:350},children:a.jsx(p(),{primary:`${(0,i.kC)(n.white.username)||"White"} (${n.white.rating||"?"}) vs ${(0,i.kC)(n.black.username)||"Black"} (${n.black.rating||"?"})`,secondary:`${(0,i.kC)(n.time_class)} played at ${new Date(1e3*n.end_time).toLocaleString().slice(0,-3)}`,primaryTypographyProps:{noWrap:!0},secondaryTypographyProps:{noWrap:!0}})},n.uuid)),0===m.length&&a.jsx(C(),{})]})]})}},35996:(e,t,n)=>{n.d(t,{Z:()=>GamePgnInput});var a=n(20997),s=n(75857),i=n.n(s),r=n(7988),l=n.n(r);function GamePgnInput({pgn:e,setPgn:t}){return a.jsx(i(),{sx:{m:1,width:600},children:a.jsx(l(),{label:"Enter PGN here...",variant:"outlined",multiline:!0,value:e,onChange:e=>t(e.target.value)})})}},65252:(e,t,n)=>{n.d(t,{Z:()=>LichessInput});var a=n(20997),s=n(91645),i=n(68835),r=n(14661),l=n(75857),o=n.n(l),c=n(7988),d=n.n(c),h=n(17373),m=n.n(h),u=n(71687),g=n.n(u),p=n(72265),x=n.n(p),C=n(93674),j=n.n(C),y=n(16689);function LichessInput({pgn:e,setPgn:t}){let[n,l]=(0,y.useState)(0),[c,h]=(0,s._)("lichess-username",""),[u,p]=(0,y.useState)([]);return(0,y.useEffect)(()=>{if(!c){p([]);return}let e=setTimeout(async()=>{let e=await (0,i.M)(c);p(e)},0===n?0:500);return l(e=>e+1),()=>{clearTimeout(e)}},[c]),(0,a.jsxs)(a.Fragment,{children:[a.jsx(o(),{sx:{m:1,width:300},children:a.jsx(d(),{label:"Enter your Lichess username...",variant:"outlined",value:c??"",onChange:e=>h(e.target.value)})}),c&&(0,a.jsxs)(m(),{container:!0,item:!0,xs:12,gap:2,justifyContent:"center",alignContent:"center",minHeight:100,children:[u.map(n=>a.jsx(g(),{onClick:()=>t(n.pgn),selected:e===n.pgn,style:{width:350,maxWidth:350},children:a.jsx(x(),{primary:`${(0,r.kC)(n.players.white.user?.name||"white")||"White"} (${n.players?.white?.rating||"?"}) vs ${(0,r.kC)(n.players.black.user?.name||"black")||"Black"} (${n.players?.black?.rating||"?"})`,secondary:`${(0,r.kC)(n.speed)} played at ${new Date(n.lastMoveAt).toLocaleString().slice(0,-3)}`,primaryTypographyProps:{noWrap:!0},secondaryTypographyProps:{noWrap:!0}})},n.id)),0===u.length&&a.jsx(j(),{})]})]})}},12048:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{Z:()=>LoadGameButton});var s=n(20997),i=n(86096),r=n.n(i),l=n(16689),o=n(15185),c=e([o]);function LoadGameButton({setGame:e,label:t,size:n}){let[a,i]=(0,l.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[s.jsx(r(),{variant:"contained",onClick:()=>i(!0),size:n,children:t||"Add game"}),s.jsx(o.Z,{open:a,onClose:()=>i(!1),setGame:e})]})}o=(c.then?(await c)():c)[0],a()}catch(e){a(e)}})},15185:(e,t,n)=>{n.a(e,async(e,a)=>{try{n.d(t,{Z:()=>NewGameDialog});var s=n(20997),i=n(7697),r=n(95366),l=n(99983),o=n(53456),c=n.n(o),d=n(17155),h=n.n(d),m=n(45845),u=n.n(m),g=n(17373),p=n.n(g),x=n(75857),C=n.n(x),j=n(87780),y=n.n(j),w=n(59127),v=n.n(w),f=n(106),k=n.n(f),$=n(64745),b=n.n($),P=n(34904),G=n.n(P),R=n(31626),T=n.n(R),L=n(86096),W=n.n(L),I=n(16689),S=n(35996),Z=n(83191),E=n(91645),_=n(65252),A=e([i]);function NewGameDialog({open:e,onClose:t,setGame:n}){let[a,o]=(0,I.useState)(""),[d,m]=(0,E._)("preferred-game-origin",l.iR.Pgn),[g,x]=(0,I.useState)(""),{addGame:j}=(0,i.f)(),handleClose=()=>{o(""),x(""),t()};return(0,s.jsxs)(c(),{open:e,onClose:handleClose,maxWidth:"md",fullWidth:!0,children:[s.jsx(h(),{marginY:1,variant:"h5",children:n?"Load a game":"Add a game to your database"}),s.jsx(u(),{children:(0,s.jsxs)(p(),{container:!0,marginTop:1,alignItems:"center",justifyContent:"start",rowGap:2,children:[(0,s.jsxs)(C(),{sx:{m:1,width:150},children:[s.jsx(y(),{id:"dialog-select-label",children:"Game origin"}),s.jsx(v(),{labelId:"dialog-select-label",id:"dialog-select",displayEmpty:!0,input:s.jsx(k(),{label:"Game origin"}),value:d??"",onChange:e=>m(e.target.value),children:Object.values(l.iR).map(e=>s.jsx(b(),{value:e,children:U[e]},e))})]}),d===l.iR.Pgn&&s.jsx(S.Z,{pgn:a,setPgn:o}),d===l.iR.ChessCom&&s.jsx(Z.Z,{pgn:a,setPgn:o}),d===l.iR.Lichess&&s.jsx(_.Z,{pgn:a,setPgn:o}),g&&s.jsx(C(),{fullWidth:!0,children:s.jsx(G(),{color:"red",textAlign:"center",marginTop:1,children:g})})]})}),(0,s.jsxs)(T(),{sx:{m:2},children:[s.jsx(W(),{variant:"outlined",sx:{marginRight:2},onClick:handleClose,children:"Cancel"}),s.jsx(W(),{variant:"contained",onClick:()=>{if(a){x("");try{let e=(0,r.pe)(a);n?n(e):j(e),handleClose()}catch(e){console.error(e),x(e instanceof Error?`${e.message} !`:"Unknown error while parsing PGN !")}}},children:"Add"})]})]})}i=(A.then?(await A)():A)[0];let U={[l.iR.Pgn]:"PGN",[l.iR.ChessCom]:"Chess.com",[l.iR.Lichess]:"Lichess.org"};a()}catch(e){a(e)}})}};